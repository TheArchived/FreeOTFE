<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<HEAD>

<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<meta name="keywords" content="disk encryption, security, transparent, AES, OTFE, plausible deniability, virtual drive, Linux, MS Windows, PDA, portable, USB drive, partition">
<meta name="description" content="FreeOTFE: A free 'on-the-fly' transparent disk encryption program for PCs and PDAs. Using this software, you can create one or more &quot;virtual disks&quot; on your PC or PDA - anything written to these disks is automatically, and securely, encrypted before being stored on your computers hard drive.">

<meta name="author" content="Sarah Dean">
<meta name="copyright" content="Copyright 2004, 2005, 2006, 2007, 2008 Sarah Dean">
<meta name="ROBOTS" content="ALL">

<TITLE>Additional Information for Windows Vista x64 and Windows 7 x64 Users <I>Only</I></TITLE>

<link href="./styles_common.css" rel="stylesheet" type="text/css">
<link href="styles_pc.css" rel="stylesheet" type="text/css">
<link rev="made" href="mailto:sdean12@sdean12.org">
<link rel="shortcut icon" href="./images/favicon.ico" type="image/x-icon">

</HEAD>
<BODY>

<CENTER>

<TABLE border=0 cellspacing=20 WIDTH=100%>
  <TR ALIGN="CENTER" VALIGN="MIDDLE">
    <TD COLSPAN="2" ALIGN="CENTER" VALIGN="MIDDLE">
<BR>
<TABLE border=0>
<TR ALIGN="CENTER" VALIGN="MIDDLE">
<TD>
<TABLE border=0>
<TR VALIGN="MIDDLE" style="font-size: x-large">
<TD>
<A HREF="http://www.FreeOTFE.org/"><IMG ALT="FreeOTFE logo" SRC="./images/FreeOTFE.gif" BORDER=0></A>
</TD>
<TD class="master_title">
<A HREF="http://www.FreeOTFE.org/" class="master_link">FreeOTFE</A>
</TD>
</TR>
</TABLE>
<TR>
<TD COLSPAN=2 ALIGN="CENTER">
<I>Free disk encryption software for PCs and PDAs</I>
</TD>
</TR>
<TR>
<TD COLSPAN=2 ALIGN="CENTER">
<FONT SIZE=-1>(<A HREF="mobile_site/index.htm">PDA version of WWW site</A>)</FONT>
</TD>
</TR>
</TABLE>
<BR>
    </TD>
  </TR>
  <TR>
    <TD width=20%>


      <TABLE class="nav_table">
        <TR>
          <TD class="nav_header">
            Contents
          </TD>
        </TR>
        <TR>
          <!-- Navigation cell -->
          <TD class="nav_text">

<B>
<!-- Begin actual contents -->
<UL class="UL_noindent">
<LI><a href="description.htm">Introduction</a>
<LI><a href="download.htm">Download</a>
<LI><a href="installation_and_upgrading.htm">Installation and Upgrading</a>
<UL>
<LI><a href="installation_and_upgrading__PC.htm">PC Version</a>
<UL>
<LI>Windows Vista&nbsp;x64 / Windows&nbsp;7&nbsp;x64 Additional
</UL>
<LI><a href="installation_and_upgrading__PDA.htm">PDA Version</a>
</UL>
<LI><a href="getting_started.htm">Getting Started</a>
<LI><a href="advanced_topics.htm">Advanced Topics</a>
<LI><a href="portable_mode.htm">Portable Mode</a>
<LI><a href="pkcs11_support.htm">Security Token/Smartcard Support</a>
<LI><a href="command_line.htm">Command Line Interface</a>
<LI><a href="Linux_volumes.htm">Linux Volumes</a>





<LI><a href="plausible_deniability.htm">Plausible Deniability</a>
<LI><a href="notes.htm">Miscellaneous Notes</a>




<LI><a href="FAQ.htm">FAQ</a>
<LI><a href="technical_details.htm">Technical Details</a>




















<LI><a href="known_bugs.htm">Known Bugs</a>
<LI><a href="fault_reporting.htm">Fault/Bug Reporting</a>
<LI><a href="TODO_list.htm">TODO List</a>
<LI><a href="version_history.htm">Appendix A: Version History</a>
<LI><a href="credits.htm">Appendix B: Credits</a>
<LI><a href="licence.htm">Appendix C: Licence</a>
<LI><a href="glossary.htm">Appendix D: Glossary</a>
<LI><a href="pkcs11_drivers.htm">Appendix E: PKCS#11 Driver Libraries</a>
<LI><a href="command_line_decryption_utilities.htm">Appendix F: Command Line Decryption Utilities</a>
<LI><a href="uninstalling.htm">Appendix G: Uninstalling</a>
<LI><a href="contact_details.htm">Appendix H: Contact Details</a>
</UL>
<!-- End actual contents -->
</B>

          </TD>
        </TR>
      </TABLE>


    </TD>

    <TD>

      <TABLE class="content_table">
        <TR>
          <TD class="content_text">
            
<H2>Additional Information for Windows Vista x64 and Windows 7 x64 Users <I>Only</I></H2>





 
<TABLE class="note" align="CENTER">
  <TR>
    <TD>
<img src="./images/note_VistaPCIcon.png" alt="PC version only" >
    </TD>
    <TD width=100%>

This section applies to the PC version of FreeOTFE, when run under the 64 bit (x64) version of <I>Windows Vista</I> and <I>Windows 7</I> only.<P>This section does <I>not</I> apply to 64 bit PCs running the 32 bit version of Windows Vista or Windows 7, or when running the x64 version of Windows XP.
    </TD>
  </TR>
</TABLE>



<P>
In order to protect its revenue streams generated by DRM protected content, Microsoft saw fit to require all drivers running under the 64 bit (x64) version of Windows Vista and Windows 7 be digitally signed by Microsoft's root certificate.

<P>
Understandably, this presents a <I>major problem</I> for the overwhelming majority of free software projects which make use of kernel mode drivers which, for obvious reasons, don't such a have a digital certificate (read: <I>haven't paid Microsoft, or one of their resellers, for such a certificate</I>) to sign their drivers with.

<P>
For the same reason, FreeOTFE's drivers are not currently signed with a Microsoft certificate.

<P>
Fortunately, there are a number of methods of loading unsigned drivers under Windows Vista x64/Windows 7 x64, <I>without</I> having to <I>pay</I> for a digital certificate, and these are summarised below.

<P>
<B>As a consequence, it <I>is</I> possible to use FreeOTFE under Vista x64/Windows 7 x64 by using the methods shown as be successful below</B>

<P>
A more long term solution (Microsoft signing) is being investigated.

<P>
<HR class="half"> <!-- ---------------------------------------------------------------------------- -->
<A NAME="level_3_heading_1"><H3>Summary of Different Methods</H3></A>


<P>
Below is a table summarising the different methods of configuring Windows Vista x64/Windows 7 x64 to allow it to run FreeOTFE.

<P>
For most users, <A HREF="#Method_3">Method 3: TESTSIGNING ON</A> is recommended

<P>

<CENTER>
<TABLE BORDER="1">
<TR>
<TH>Method</TH>
<TH>Results</TH>
<TH>"Test Mode"<BR>on wallpaper</TH>
<TH>Junk messages<BR>shown on manual start</TH>
<TH>Recommended?</TH>
</TR>

<TR>
<TD><A HREF="#Method_1">1. NOINTEGRITYCHECKS ON</A></TD>
<TD ALIGN="CENTER" BGCOLOR="#FF4040">Ineffective</TD>
<TD ALIGN="CENTER">No</TD>
<TD ALIGN="CENTER">Yes</TD>
<TD ALIGN="CENTER">No</TD>
</TR>
<TR>
<TD><A HREF="#Method_2">2. DDISABLE_INTEGRITY_CHECKS</A></TD>
<TD ALIGN="CENTER" BGCOLOR="#FFFF40">May work</TD>
<TD ALIGN="CENTER">No</TD>
<TD ALIGN="CENTER">Yes</TD>
<TD ALIGN="CENTER">&nbsp;</TD>
</TR>
<TR>
<TD><A HREF="#Method_3">3. TESTSIGNING ON</A></TD>
<TD ALIGN="CENTER" BGCOLOR="#40FF40">Works</TD>
<TD ALIGN="CENTER">Yes</TD>
<TD ALIGN="CENTER">No</TD>
<TD ALIGN="CENTER" BGCOLOR="#00FF00"><B>Yes</B></TD>
</TR>
<TR>
<TD><A HREF="#Method_4">4. &lt;F8&gt; while booting</A></TD>
<TD ALIGN="CENTER" BGCOLOR="#40FF40">Works</TD>
<TD ALIGN="CENTER">No</TD>
<TD ALIGN="CENTER">Yes</TD>
<TD ALIGN="CENTER">&nbsp;</TD>
</TR>
<TR>
<TD><A HREF="#Method_5">5. ReadyDriver Plus</A></TD>
<TD ALIGN="CENTER" BGCOLOR="#40FF40">Works</TD>
<TD ALIGN="CENTER">No</TD>
<TD ALIGN="CENTER">Yes</TD>
<TD ALIGN="CENTER">&nbsp;</TD>
</TR>
<TR>
<TD><A HREF="#Method_6">6. EasyBCD</A></TD>
<TD ALIGN="CENTER" BGCOLOR="#FFFF40">May work</TD>
<TD ALIGN="CENTER">No</TD>
<TD ALIGN="CENTER">Yes</TD>
<TD ALIGN="CENTER">No</TD>
</TR>
<TR>
<TD><A HREF="#Method_7">7. Signing with a Microsoft certificate</A></TD>
<TD ALIGN="CENTER" BGCOLOR="#40FF40">Works</TD>
<TD ALIGN="CENTER">No</TD>
<TD ALIGN="CENTER">No</TD>
<TD ALIGN="CENTER">&nbsp;</TD>
</TR>

</TABLE>
</CENTER>

<P>
<A NAME="level_4_heading_1"><H4>"Test Mode" on wallpaper</H4></A>


<P>
The method with "Yes" marked in this column indicates that the words "Test Mode" will be shown in each of the four corners of the desktop wallpaper. This is largely a cosmetic issue, and can be resolved using the directions indicated in the description of this method.

<A NAME="level_4_heading_2"><H4>Junk messages shown on manual start</H4></A>


Those methods with "Yes" marked in this column indicate that MS Windows will pop up a message stating: "Windows requires a digitally signed driver" for each and every driver loaded - even though the drivers <I>are</I> digitally signed (albeit using self-certification).

<P>
If the drivers are started automatically on booting, these messages will <I>not</I> appear.

<P>
However, if the FreeOTFE drivers are started from the GUI (e.g. by starting portable mode). Since FreeOTFE's flexible architecture employs multiple drivers, this is hardly ideal as the user gets peppered with junk messages telling them what they're doing - as if they didn't already know!

<P>
The number of these messages shown can be minimised by removing all unused hash and cypher drivers.


<P>
<!-- ---------------------------------------------------------------------------- -->
<A NAME="Method_1"></A>
<P>
<HR class="half"> <!-- ---------------------------------------------------------------------------- -->
<A NAME="level_3_heading_2"><H3>Method 1: NOINTEGRITYCHECKS ON</H3></A>


Instructions:

<OL>
<LI>Open an elevated command prompt by <I>either</I>:
<UL>
<LI>Clicking the "Start" button on the Windows taskbar, type CMD in the <I>search box</I>, and then press &lt;CTRL+SHIFT+ENTER&gt; to run CMD with administrator privileges), <I>or</I>
<LI>Locating "cmd.exe" under C:\Windows\System32 in Windows Explorer, rightclicking on this executable and selecting "Run as Administrator" from the context menu
</UL>
<LI>Click "continue" or enter the administrator's password as appropriate and click "OK", when asked for permission to continue.
<LI>In the command prompt window which appears, type:

<BLOCKQUOTE>
<PRE>
bcdedit.exe /set nointegritychecks ON
</PRE>
</BLOCKQUOTE>
<LI>Reboot the PC
</OL>

<BR>
<!-- ---------------------------------------------------------------------------- -->
<A NAME="Method_2"></A>
<P>
<HR class="half"> <!-- ---------------------------------------------------------------------------- -->
<A NAME="level_3_heading_3"><H3>Method 2: DDISABLE_INTEGRITY_CHECKS</H3></A>


Instructions:

<OL>
<LI>Open an elevated command prompt by <I>either</I>:
<UL>
<LI>Clicking the "Start" button on the Windows taskbar, type CMD in the <I>search box</I>, and then press &lt;CTRL+SHIFT+ENTER&gt; to run CMD with administrator privileges), <I>or</I>
<LI>Locating "cmd.exe" under C:\Windows\System32 in Windows Explorer, rightclicking on this executable and selecting "Run as Administrator" from the context menu
</UL>
<LI>Click "continue" or enter the administrator's password as appropriate and click "OK", when asked for permission to continue.
<LI>In the command prompt window which appears, type:

<BLOCKQUOTE>
<PRE>
bcdedit /set loadoptions DDISABLE_INTEGRITY_CHECKS
</PRE>
</BLOCKQUOTE>

(Note: That's "DDISABLE", with two Ds, for "Driver Disable")
<LI>Reboot the PC
</OL>

<P>
This method <I>will</I> work, however installing Windows Vista x64 Service Pack 1 (SP1), or any of the following Windows Vista "hotfixes" will cause this method to cease working:

<UL>
<LI><A HREF="http://support.microsoft.com/kb/932596">KB932596: Update to improve Kernel Patch Protection</A>
<LI><A HREF="http://support.microsoft.com/kb/938194">KB938194: An update is available that improves the compatibility and reliability of Windows Vista</A>
<LI><A HREF="http://support.microsoft.com/kb/938979">KB938979: An update is available that improves the performance and reliability of Windows Vista</A>
<LI><A HREF="http://support.microsoft.com/kb/941649">KB941649: An update is available that improves the compatibility, reliability, and stability of Windows Vista</A>
<LI><A HREF="http://support.microsoft.com/kb/943078">KB943078: MS07-066: Vulnerability in the Windows kernel could allow elevation of privilege</A>
<LI><A HREF="http://support.microsoft.com/kb/943899">KB943899: An update that improves the performance, responsiveness, and reliability of Windows Vista is available</A>
</UL>

<P>
Uninstalling the above should allow this method to work again, though is hardly ideal.

<P>
Note: This list of hotfixes was compiled from information taken from the following WWW sites:

<UL>
<LI><A HREF="http://www.mydigitallife.info/2008/02/26/unable-to-disable-integrity-checks-cause-drivers-not-found-in-64-bit-vista-x64/">Unable to Disable Integrity Checks Cause Drivers Not Found in 64-bit Vista (x64)</A>
<LI><A HREF="http://www.pronetworks.org/forum/post-750198.html&sid=ad70ccdfad11e388c3f1549a5410a3df">Disable Vista Driver Signing not working - Resolved!</A>
<LI><A HREF="http://thebackroomtech.wordpress.com/2007/11/05/howto-disabling-driver-signing-in-windows-vista-64-bit/">Howto: Disabling Driver Signing in Windows Vista 64 bit</A>
</UL>

<BR>
<!-- ---------------------------------------------------------------------------- -->
<A NAME="Method_3"></A>
<P>
<HR class="half"> <!-- ---------------------------------------------------------------------------- -->
<A NAME="level_3_heading_4"><H3>Method 3: TESTSIGNING ON</H3></A>


Instructions:

<OL>
<LI>Open an elevated command prompt by <I>either</I>:
<UL>
<LI>Clicking the "Start" button on the Windows taskbar, type CMD in the <I>search box</I>, and then press &lt;CTRL+SHIFT+ENTER&gt; to run CMD with administrator privileges), <I>or</I>
<LI>Locating "cmd.exe" under C:\Windows\System32 in Windows Explorer, rightclicking on this executable and selecting "Run as Administrator" from the context menu
</UL>
<LI>Click "continue" or enter the administrator's password as appropriate and click "OK", when asked for permission to continue.
<LI>In the command prompt window which appears, type:

<BLOCKQUOTE>
<PRE>
bcdedit.exe /set TESTSIGNING ON
</PRE>
</BLOCKQUOTE>
<LI>Reboot the PC
</OL>

<P>
<I>This method is probably the best solution,</I> and allows FreeOTFE to run correctly. However, it does have a trivial side effect: The words "Test Mode" are shown in the four corners of the Desktop wallpaper after rebooting.

<P>
Although only a cosmetic issue, the words "Test Mode" may be removed from your background by using one the following methods:

<UL>
<LI><A HREF="http://www.mydigitallife.info/2008/01/09/remove-and-erase-desktop-evaluation-copy-test-mode-or-safe-mode-watermark-in-64-bit-x64-vista/">Remove and Erase Desktop "Evaluation Copy", "Test Mode" or "Safe Mode" Watermark in 64-bit (x64) Vista</A>
<LI><A HREF="http://www.mydigitallife.info/2007/11/03/get-rid-of-and-remove-evaluation-copy-watermark-in-vista-after-installating-sp1/">Get Rid Of and Remove Evaluation Copy Watermark in Vista After Installating SP1</A>
<LI><A HREF="http://www.mydigitallife.info/2006/11/23/remove-and-disable-windows-vista-evaluation-watermark-from-desktop/">Remove and Disable Windows Vista Evaluation Watermark from Desktop</A>
</UL>

Alternatively, using <A HREF="http://windowshelp.microsoft.com/Windows/en-US/Help/51a8bdac-cd66-4ae3-afdf-6c6dcf804b991033.mspx">Windows DreamScene</A> (which allows videos to be shown as an animated desktop "wallpaper", instead of a static image) will prevent the "Test Mode" watermark being shown. DreamScene is intended for use with "Ultimate" edition of Windows Vista/Windows 7, though other animated desktop solutions are available for users with other editions (e.g. Home or Business).


<P>
<!-- ---------------------------------------------------------------------------- -->
<A NAME="Method_4"></A>
<P>
<HR class="half"> <!-- ---------------------------------------------------------------------------- -->
<A NAME="level_3_heading_5"><H3>Method 4: &lt;F8&gt; while booting</H3></A>


Instructions:

<OL>
<LI>Reboot the PC
<LI>At the start of the boot sequence, press &lt;F8&gt;
<LI>When prompted, select the "Disable Driver Signature Enforcement" option and press &lt;ENTER&gt;
</OL>

<P>
Note: This method is not persistent, and its effect will cease the next time the PC is rebooted, unless this procedure is carried out again while rebooting. However, the "ReadyDriver Plus" method described below may be used to carry it out automatically.


<P>
<!-- ---------------------------------------------------------------------------- -->
<A NAME="Method_5"></A>
<P>
<HR class="half"> <!-- ---------------------------------------------------------------------------- -->
<A NAME="level_3_heading_6"><H3>Method 5: ReadyDriver Plus</H3></A>


<P>
"ReadyDriver Plus" is a piece of boot loader software which automatically carries out the "&lt;F8&gt; while booting" method of enabling driver loading.

<P>
Instructions:

<OL>
<LI>Download a copy of "ReadyDriver Plus" (v1.1 or later) from <A HREF="http://citadel.x10hosting.com/readydriverplus/">Citadel Industries</A>
<LI>Install the software
<LI>Reboot the PC
</OL>

<BR>
<!-- ---------------------------------------------------------------------------- -->
<A NAME="Method_6"></A>
<P>
<HR class="half"> <!-- ---------------------------------------------------------------------------- -->
<A NAME="level_3_heading_7"><H3>Method 6: EasyBCD</H3></A>


Instructions:

<OL>
<LI>Download a copy of "EasyBCD" (v1.7 or later; tested with v1.7.2) from <A HREF="http://neosmart.net/">NeoSmart Technologies</A>
<LI>Install the software
<LI>Run EasyBCD
<LI>Click the "Advanced Options" button
<LI>Check the "Allow unsigned driver installation on Vista 64-Bit Edition" checkbox
<LI>Click "Apply Settings"
<LI>Reboot the PC
</OL>

<P>
Although NeoSmart Technologies implemented some functionality to allow the use of "unsigned" drivers under Windows Vista x64, testing shows this appears limited to setting DDISABLE_INTEGRITY_CHECKS (see method above) via a pretty GUI - despite their change log claims to "Allow 100% of unsigned drivers to run on Vista 64-Bit Edition". Support for this functionality was effectively <A HREF="http://neosmart.net/blog/2007/want-to-permanently-disable-driver-verification-in-vista-x64/">dropped in August 2008</A>

<P>
Because of this, it is recommended that <A HREF="#Method_2">Method 2: DDISABLE_INTEGRITY_CHECKS</A> be employed, rather than EasyBCD; since it offers no significant advantages.


<P>
<!-- ---------------------------------------------------------------------------- -->
<A NAME="Method_7"></A>
<P>
<HR class="half"> <!-- ---------------------------------------------------------------------------- -->
<A NAME="level_3_heading_8"><H3>Method 7: Signing with a Microsoft certificate</H3></A>


<P>
This method requires signing the FreeOTFE drivers with a Microsoft certificate, as opposed to the self certified signature currently used in the release.

<P>
There are currently two ways of signing the FreeOTFE drivers:

<OL>
<LI>Find someone with a digital certificate, and ask them to sign the release (not ideal).
<LI>Find someone prepared to finance buying a digital certificate (circa 450 EUR for three years?!!) which could be used.
</OL>

The latter would probably be the best long term solution; offers of help would be gratefully received - please <A HREF="contact.html">get in contact</A>!


          </TD>
        </TR>
      </TABLE>

    </TD>

  </TR>
</TABLE>

</CENTER>


</BODY>
</HTML>